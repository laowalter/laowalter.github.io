<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    <link rel="stylesheet" href="/sass/main.min.6e3c2b079ee31b17abb26d025a098c60ce82093b938c09a95277f558ea824d75.css">

</head>

    
<head>
    
    

    
    
    <link href="css/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>
       <div class="homepage-header">
          <div class="homepage-left">
            <h1>通达信公式手册</h1> 
            <p>Sat Jan 21, 2017</p>
            <a class="tag tag--primary tag--small"   href="/"><font color="green">Home</font></a>

            
                
                    <a class="tag tag--primary tag--small" href="tags/%E9%80%9A%E8%BE%BE%E4%BF%A1">通达信</a>
                
                    <a class="tag tag--primary tag--small" href="tags/stock">stock</a>
                
            
          </div>
      </div>

    <hr><br><nav id="TableOfContents">
<ul>
<li><a href="#引用函数">引用函数</a></li>
<li><a href="#绘图函数">绘图函数</a></li>
<li><a href="#颜色函数">颜色函数</a></li>
<li><a href="#形态函数">形态函数</a></li>
<li><a href="#横向统计函数">横向统计函数</a></li>
<li><a href="#大盘函数">大盘函数</a></li>
<li><a href="#未来函数">未来函数</a></li>
<li><a href="#函数公式">函数公式</a></li>
<li><a href="#统计函数">统计函数</a></li>
<li><a href="#算术函数">算术函数</a></li>
<li><a href="#形态函数-1">形态函数</a></li>
<li><a href="#时间函数">时间函数</a></li>
<li><a href="#行情函数">行情函数</a></li>
</ul></li>
</ul>
</nav><article>
    

<h2 id="引用函数">引用函数</h2>

<p>1．DRAWNULL 无效数</p>

<p>返回无效数。</p>

<p>用法： DRAWNULL</p>

<p>例如：IF(CLOSE&gt;REF(CLOSE，1)，CLOSE，DRAWNULL)表示下跌时分析图上不画线。</p>

<p>2．BACKSET 向前赋值</p>

<p>将当前位置到若干周期前的数据设为1。</p>

<p>用法：BACKSET(X，N)若X非0，则将当前位置到N周期前的数值设为1。</p>

<p>例如：BACKSET(CLOSE&gt;OPEN，2)若收阳则将该周期及前一周期数值设为1，否则为0。</p>

<p>3．BARSCOUNT 有效数据周期数</p>

<p>求总的周期数。</p>

<p>用法：BARSCOUNT(X)第一个有效数据到当前的天数。</p>

<p>例如：BARSCOUNT(CLOSE)对于日线数据取得上市以来总交易日数，对于分笔成交取得当日成交笔数，对于1分钟线取得当日交易分钟数。</p>

<p>4．CURRBARSCOUNT 到最后交易日的周期数</p>

<p>求到最后交易日的周期数.</p>

<p>用法:</p>

<p>CURRBARSCOUNT 求到最后交易日的周期数</p>

<p>5．TOTALBARSCOUNT 总的周期数</p>

<p>求总的周期数.</p>

<p>用法:</p>

<p>TOTALBARSCOUNT 求总的周期数</p>

<p>6．BARSLAST 上一次条件成立位置</p>

<p>上一次条件成立到当前的周期数。</p>

<p>用法：BARSLAST(X)上一次X不为0到现在的天数。</p>

<p>例如：BARSLAST(CLOSE/REF(CLOSE,1)&gt;=1.1)表示上一个涨停板到当前的周期数。</p>

<p>7．BARSSINCE 第一个条件成立位置</p>

<p>第一个条件成立到当前的周期数。</p>

<p>用法：BARSSINCE(X)第一次X不为0到现在的天数。</p>

<p>例如：BARSSINCE(HIGH&gt;10)表示股价超过10元时到当前的周期数。</p>

<p>8．COUNT 统计</p>

<p>统计满足条件的周期数。</p>

<p>用法：COUNT(X，N)统计N周期中满足X条件的周期数，若N=0则从第一个有效值开始。</p>

<p>例如：COUNT(CLOSE&gt;OPEN，20)表示统计20周期内收阳的周期数。</p>

<p>9．HHV 最高值</p>

<p>求最高值。</p>

<p>用法：HHV(X，N)求N周期内X最高值，N=0则从第一个有效值开始。</p>

<p>例如：HHV(HIGH,30)表示求30日最高价。</p>

<p>10．HHVBARS 上一高点位置</p>

<p>求上一高点到当前的周期数。</p>

<p>用法：HHVBARS(X，N)求N周期内X最高值到当前周期数，N=0表示从第一个有效值开始统计。</p>

<p>例如：HHVBARS(HIGH，0)求得历史新高到到当前的周期数。</p>

<p>11．LLV 最低值</p>

<p>求最低值。</p>

<p>用法：LLV(X，N)求N周期内X最低值，N=0则从第一个有效值开始。</p>

<p>例如：LLV(LOW，0)表示求历史最低价。</p>

<p>12．LLVBARS 上一低点位置</p>

<p>求上一低点到当前的周期数。</p>

<p>用法：LLVBARS(X，N)求N周期内X最低值到当前周期数，N=0表示从第一个有效值开始统计。</p>

<p>例如：LLVBARS(HIGH，20)求得20日最低点到当前的周期数。</p>

<p>13．REVERSE 求相反数</p>

<p>求相反数。</p>

<p>用法：REVERSE(X)返回-X。</p>

<p>例如：REVERSE(CLOSE)返回-CLOSE。</p>

<p>14．REF 向前引用</p>

<p>引用若干周期前的数据。</p>

<p>用法：REF(X，A)引用A周期前的X值。</p>

<p>例如：REF(CLOSE，1)表示上一周期的收盘价，在日线上就是昨收。</p>

<p>15．REFDATE 指定引用</p>

<p>引用指定日期的数据。</p>

<p>用法：REFDATE(X，A)引用A日期的X值。</p>

<p>例如：REF(CLOSE，20011208)表示2001年12月08日的收盘价。</p>

<p>16．SUM 总和</p>

<p>求总和。</p>

<p>用法：SUM(X，N)统计N周期中X的总和，N=0则从第一个有效值开始。</p>

<p>例如：SUM(VOL，0)表示统计从上市第一天以来的成交量总和。</p>

<p>17．FILTER 过滤</p>

<p>过滤连续出现的信号。</p>

<p>用法：FILTER(X，N)X满足条件后，删除其后N周期内的数据置为0。</p>

<p>例如：FILTER(CLOSE&gt;OPEN，5)查找阳线，5天内再次出现的阳线不被记录在内。</p>

<p>18．SUMBARS 累加到指定值的周期数</p>

<p>向前累加到指定值到现在的周期数。</p>

<p>用法：SUMBARS(X，A)将X向前累加直到大于等于A，返回这个区间的周期数。</p>

<p>例如：SUMBARS(VOL，CAPITAL)求完全换手到现在的周期数。</p>

<p>19．SMA 移动平均</p>

<p>返回移动平均。</p>

<p>用法：SMA(X，N，M)X的M日移动平均，M为权重，如Y=(X<em>M+Y’</em>(N-M))/N</p>

<p>20．MA 简单移动平均</p>

<p>返回简单移动平均。</p>

<p>用法：MA(X，M)X的M日简单移动平均。</p>

<p>21．DMA 动态移动平均</p>

<p>求动态移动平均。</p>

<p>用法：DMA(X，A)求X的动态移动平均。</p>

<p>算法：若Y=DMA(X，A)则 Y=A*X+(1-A)*Y’，其中Y’表示上一周期Y值，A必须小于1。</p>

<p>例如：DMA(CLOSE，VOL/CAPITAL)表示求以换手率作平滑因子的平均价。</p>

<p>22．EMA(或EXPMA) 指数移动平均</p>

<p>返回指数移动平均。</p>

<p>用法：EMA(X，M)X的M日指数移动平均。</p>

<p>23．MEMA 平滑移动平均</p>

<p>返回平滑移动平均</p>

<p>用法：MEMA(X，M)X的M日平滑移动平均。MEMA(X,N)与MA的差别在于起始值为一平滑值,而不是初始值</p>

<p>24．EXPMEMA 指数平滑移动平均</p>

<p>返回指数平滑移动平均。</p>

<p>用法：EXPMEMA(X，M)X的M日指数平滑移动平均。EXPMEMA同EMA(即EXPMA)的差别在于他的起始值为一平滑值</p>

<p>25．RANGE 介于某个范围之间</p>

<p>用法：RANGE(A,B,C)A在B和C。</p>

<p>例如：RANGE(A，B，C)表示A大于B同时小于C时返回1，否则返回0</p>

<p>26．CONST 取值设为常数</p>

<p>用法: CONST(A)取A最后的值为常量.</p>

<p>例如：CONST(INDEXC)表示取大盘现价。</p>

<p>27．ISLASTBAR 判断是否为最后一个周期</p>

<p>28．BARSLASTCOUNT 统计条件连续成立次数</p>

<p>用法:</p>

<p>BARSLASTCOUNT(X),统计连续满足X条件的周期数.</p>

<p>例如:BARSLASTCOUNT(CLOSE&gt;OPEN)表示统计连续收阳的周期数</p>

<p>29．XMA 偏移移动平均</p>

<p>用法:</p>

<p>XMA(X,M):X的M日偏移移动平均</p>

<p>30．TOPRANGE 当前值是近多少周期内的最大值</p>

<p>用法:</p>

<p>TOPRANGE(X):X是近多少周期内X的最大值</p>

<p>例如:TOPRANGE(HIGH)表示当前最高价是近多少周期内的最高价</p>

<p>31．LOWRANGE 当前值是近多少个周期内的最小值</p>

<p>用法:</p>

<p>LOWRANGE(X):X是近多少周期内X的最小值</p>

<p>例如:LOWRANGE(LOW)表示当前最高价是近多少周期内的最小价</p>

<h2 id="绘图函数">绘图函数</h2>

<p>1．PLOYLINE 折线段</p>

<p>在图形上绘制折线段。</p>

<p>用法：PLOYLINE(COND，PRICE)，当COND条件满足时，以PRICE位置为顶点画折线连接。</p>

<p>例如：PLOYLINE(HIGH&gt;=HHV(HIGH，20)，HIGH)表示在创20天新高点之间画折线。</p>

<p>2．DRAWLINE 绘制直线段</p>

<p>在图形上绘制直线段。</p>

<p>用法：DRAWLINE(COND1，PRICE1，COND2，PRICE2，EXPAND)</p>

<p>当COND1条件满足时，在PRICE1位置画直线起点，当COND2条件满足时，在PRICE2位置画直线终点，EXPAND为延长类型。</p>

<p>例如：DRAWLINE(HIGH&gt;=HHV(HIGH，20)，HIGH，LOW&lt;=LLV(LOW，20)，LOW，1)表示在创20天新高与创20天新低之间画直线并且向右延长。</p>

<p>3．DRAWKLINE 绘制K线</p>

<p>用法：DRAWKLINE(HIGH，OPEN，LOW，CLOSE)以HIGH为最高价，OPEN为开盘价，LOW为最低，CLOSE收盘画K线。</p>

<p>4．STICKLINE 绘制柱线</p>

<p>在图形上绘制柱线。</p>

<p>用法：STICKLINE(COND，PRICE1，PRICE2，WIDTH，EMPTY)，当COND条件满足时，在PRICE1和PRICE2位置之间画柱状线，宽度为WIDTH(10为标准间距)，EMPTH不为0则画空心柱。</p>

<p>例如：STICKLINE(CLOSE&gt;OPEN，CLOSE，OPEN，0.8，1)表示画K线中阳线的空心柱体部分。</p>

<p>5．DRAWICON 绘制图标</p>

<p>在图形上绘制小图标。</p>

<p>用法：DRAWICON(COND，PRICE，TYPE)，当COND条件满足时，在PRICE位置画TYPE号图标。</p>

<p>例如：DRAWICON(CLOSE&gt;OPEN，LOW，1)表示当收阳时在最低价位置画1号图标。图标一共有九个，最下面的是“1”号，最上面的是“9”号。</p>

<p>6．DRAWTEXT 显示文字</p>

<p>在图形上显示文字。</p>

<p>用法：DRAWTEXT(COND，PRICE，TEXT)，当COND条件满足时，在PRICE位置书写文字TEXT。</p>

<p>例如：DRAWTEXT(CLOSE/OPEN&gt;1.08，LOW，’大阳线’)表示当日涨幅大于8%时在最低价位置显示’大阳线’字样。</p>

<h2 id="颜色函数">颜色函数</h2>

<p>COLOR 自定义色</p>

<p>格式为COLOR+“RRGGBB”：RR、GG、BB表示红蓝色、绿色和蓝色的分量，每种颜色的取值范围是00-FF，采用了16进制。</p>

<p>例如：MA5：MA(CLOSE，5)，COLOR00FFFF表示纯红色与纯绿色的混合色：COLOR808000表示淡蓝色和淡绿色的混合色。</p>

<p>COLORBLACK 画黑色</p>

<p>COLORBLUE 画蓝色</p>

<p>COLORGREEN 画绿色</p>

<p>COLORCYAN 画青色</p>

<p>COLORRED 画红色</p>

<p>COLORMAGENTA 画洋红色</p>

<p>COLORBROWN 画棕色</p>

<p>COLORLIGRAY 画淡灰色</p>

<p>COLORGRAY画深灰色</p>

<p>COLORLIBLUE 画淡蓝色</p>

<p>COLORLIGREEN 画淡绿色</p>

<p>COLORLICYAN 画淡青色</p>

<p>COLORLIRED 画淡红色</p>

<p>COLORLIMAGENTA 画淡洋红色</p>

<p>COLORYELLOW 画黄色</p>

<p>COLORWHITE 画白色</p>

<p>LINETHICK 线型粗细</p>

<p>格式：“LINETHICK+(1-9)”参数的取值范围在1—9之间，“LINETHICK1”表示最细的线，而“LINETHICK9”表示最粗的线。</p>

<p>STICK 画柱状线</p>

<p>COLORSTICK 画彩色柱状线</p>

<p>VOLSTICK 画彩色柱状线</p>

<p>成交量柱状线，当股价上涨时显示红色空心柱，则显示绿色实心柱</p>

<p>LINESTICK 同时画出柱状线和指标线</p>

<p>CROSSDOT 画小叉线</p>

<p>CIRCLEDOT 画小圆圈线</p>

<p>POINTDOT 画小圆点线</p>

<h2 id="形态函数">形态函数</h2>

<p>1．COST 成本分布</p>

<p>成本分布情况。</p>

<p>用法：COST(10)，表示10%获利盘的价格是多少，即有10%的持仓量在该价格以下，其余90%在该价格以上，为套牢盘。</p>

<p>该函数仅对日线分析周期有效。</p>

<p>2．PEAK 波峰值</p>

<p>前M个ZIG转向波峰值。</p>

<p>用法：PEAK(K，N，M)表示之字转向ZIG(K，N)的前M个波峰的数值，M必须大于等于1。</p>

<p>例如：PEAK(1,5,1)表示%5最高价ZIG转向的上一个波峰的数值。</p>

<p>3．PEAKBARS 波峰位置</p>

<p>前M个ZIG转向波峰到当前距离。</p>

<p>用法：PEAKBARS(K，N，M)表示之字转向ZIG(K，N)的前M个波峰到当前的周期数，M必须大于等于1。</p>

<p>例如：PEAKBARS (0，5，1)表示%5开盘价ZIG转向的上一个波峰到当前的周期数。</p>

<p>4．SAR 抛物转向</p>

<p>抛物转向。</p>

<p>用法： SAR(N，S，M)，N为计算周期，S为步长，M为极值。</p>

<p>例如：SAR(10，2，20)表示计算10日抛物转向，步长为2%，极限值为20%。</p>

<p>5．SARTURN 抛物转向点</p>

<p>抛物转向点。</p>

<p>用法：SARTURN(N，S，M)N为计算周期，S为步长，M为极值，若发生向上转向则返回1，若发生向下转向则返回-1，否则为0。</p>

<p>其用法与SAR函数相同。</p>

<p>6．TROUGH 波谷值</p>

<p>前M个ZIG转向波谷值。</p>

<p>用法：TROUGH(K，N，M)表示之字转向ZIG(K，N)的前M个波谷的数值，M必须大于等于1。</p>

<p>例如：TROUGH(2，5，2)表示%5最低价ZIG转向的前2个波谷的数值。</p>

<p>7．TROUGHBARS 波谷位置</p>

<p>前M个ZIG转向波谷到当前距离。</p>

<p>用法：TROUGHBARS(K，N，M)表示之字转向ZIG(K，N)的前M个波谷到当前的周期数，M必须大于等于1。</p>

<p>例如：TROUGH(2，5，2)表示%5最低价ZIG转向的前2个波谷到当前的周期数。</p>

<p>8．WINNER 获利盘比例</p>

<p>获利盘比例。</p>

<p>用法：WINNER(CLOSE)表示以当前收市价卖出的获利盘比例。</p>

<p>例如：返回0.1表示10%获利盘，WINNER(10.5)表示10.5元价格的获利盘比例。</p>

<p>该函数仅对日线分析周期有效。</p>

<p>9．LWINNER 近期获利盘比例</p>

<p>近期获利盘比例。</p>

<p>用法：LWINNER(5，CLOSE)表示最近5天的那部分成本以当前收市价卖出的获利盘比例。例如返回0.1表示10%获利盘。</p>

<p>10．PWINNER 远期获利盘比例</p>

<p>远期获利盘比例。</p>

<p>用法：PWINNER(5，CLOSE)表示5天前的那部分成本以当前收市价卖出的获利盘比例。例如返回0.1表示10%获利盘。</p>

<p>11．COSTEX 区间成本</p>

<p>区间成本。</p>

<p>用法：COSTEX(CLOSE，REF(CLOSE))，表示近两日收盘价格间筹码的成本，例如返回10表示区间成本为20元。</p>

<p>该函数仅对日线分析周期有效。</p>

<p>12．PPART 远期成本分布比例</p>

<p>远期成本分布比例。</p>

<p>用法：PPART(10)，表示10前的成本占总成本的比例，0.2表示20%。</p>

<p>13．ZIG 之字转向</p>

<p>之字转向。</p>

<p>用法：ZIG(K，N)当价格变化量超过N%时转向，K表示0:开盘价，1:最高价，2:最低价，3:收盘价，其余:数组信息</p>

<p>例如：ZIG(3，5)表示收盘价的5%的ZIG转向。</p>

<p>14．NEWSAR 新SAR</p>

<p>15．MYSORTIDX 个股相对强弱</p>

<p>返回该股在全市场中的排名,该函数需要扩展数据支持</p>

<p>16．ALLSTKNUM 交易股票数</p>

<p>返回当日所有交易股票数,该函数需要扩展数据支持</p>

<h2 id="横向统计函数">横向统计函数</h2>

<p>1．BLOCKSETNUM 板块股票个数</p>

<p>用法：BLOCKSETNUM(板块名称)返回该板块股票个数。</p>

<p>2．HORCALC 多股统计</p>

<p>用法：HORCALC(板块名称，数据项，计算方式，权重)</p>

<p>数据项：100-HIGH，101-OPEN，102-LOW，103-CLOSE，104-VOL，105-涨幅</p>

<p>计算方式：0-累加，1-排名次</p>

<p>权重：0-总股本，1-流通股本，2-等同权重，3-流通市值</p>

<p>3．INSORT 板块排序选股</p>

<p>用法:INSORT(板块名称,指标名称,指标线,升降序),</p>

<p>返回该股在板块中的排序序号</p>

<p>例如:INSORT(‘房地产’,’KDJ’,3,0)表示该股的KDJ指标第三个输出即J之值在房地产板块中的排名,</p>

<p>最后一个参数为0表示降序排名</p>

<h2 id="大盘函数">大盘函数</h2>

<p>1．INDEXA  返回大盘成交额，如：D:INDEXA,输出大盘成交额;</p>

<p>2．INDEXADV 返回上涨家数</p>

<p>3．INDEXDEC 返回下跌家数</p>

<p>4．INDEXC  返回大盘收盘价</p>

<p>5．INDEXH  返回大盘最高价</p>

<p>6．INDEXL  返回大盘最低价</p>

<p>7．INDEXO  返回大盘开盘价</p>

<p>8．INDEXV  返回大盘成交量</p>

<h2 id="未来函数">未来函数</h2>

<p>公式系统对数据的运算是基于一系列函数，函数必须满足时间不变性，即时间靠后的数据不对时间靠前的结果产生影响（判断是否未来函数的依据）。这个很重要！对于未来函数可以理解为：某一量依赖另一量，如量Ａ和量B，B变化使A改变，那么A是B的函数，如果B是稍后的量，A是稍早的量，A跟着B变，A是B的未来函数。未来函数是有时间周期的，在一个短的周期内可能是未来函数，但在稍长的周期内就不是未来函数，比如”HIGH”(最高价),在一天收市前都是不确定的.如在交易没有结束时我们可以看到某一个指标，如“卖出”跟着股价的高低一会出现，一会消失（这个现象很容易观察到）。所以对于一个日周期的指标在分时周期具有“未来函数”特征。但一旦收盘该指标是定值，不应随明日及以后的价而变，所以该指标在日周期中不是未来函数。</p>

<p>被人们普遍认为是未来函数的是比较长时间才被确认的ZIG函数,比如把参数设置为ZIG(3,5),就要等下一个ZIG(3,5)成立时才能被确认,就是说你把周期设置得越长,被确认的时间就越长(比如ZIG(3,30)),如果把它设置的很短(比如ZIG(3,1)),那就跟”high”差不多了.</p>

<p>有未来函数的公式对历史模拟的相当准确，对号称100％的.99％准确的公式要小心。</p>

<p>未来函数有：</p>

<p>ZIG</p>

<p>PEAK</p>

<p>PEAKBARS</p>

<p>TROUGH</p>

<p>TROUGHBARS</p>

<p>所以任何函数都具有未来函数特性，也没什么可怕。第一不要依据公式入市，第二还是不要依据公式入市！不要迷信公式。</p>

<p>公式只能给你一个信号，最终判断取舍要靠人。</p>

<p>公式指标中如果含有未来函数，那么这个指标从历史看是非常准确，但如果使用，往往出现一些假的指示，这些指示随着股价的变化而变化。往往误导股民。</p>

<h2 id="函数公式">函数公式</h2>

<p>DYNAINFO(3)  前收盘价</p>

<p>DYNAINFO(4)  今开</p>

<p>DYNAINFO(5)  最高</p>

<p>DYNAINFO(6)  最低</p>

<p>DYNAINFO(7)  现价</p>

<p>DYNAINFO(8)  总手</p>

<p>DYNAINFO(9)  现手</p>

<p>DYNAINFO(10) 总成交金额</p>

<p>DYNAINFO(11) 均价</p>

<p>DYNAINFO(12) 日升跌</p>

<p>DYNAINFO(13) 振幅度</p>

<p>DYNAINFO(14) 涨幅度</p>

<p>DYNAINFO(15) 委托比</p>

<p>DYNAINFO(16) 委量差</p>

<p>DYNAINFO(17) 量比</p>

<p>DYNAINFO(20) 最新叫买价</p>

<p>DYNAINFO(21) 最新叫卖价</p>

<p>DYNAINFO(22) 内盘</p>

<p>DYNAINFO(23) 外盘</p>

<p>DYNAINFO(25) 买一量</p>

<p>DYNAINFO(26) 买二量</p>

<p>DYNAINFO(27) 买三量</p>

<p>DYNAINFO(28) 买一价</p>

<p>DYNAINFO(29) 买二价</p>

<p>DYNAINFO(30) 买三价</p>

<p>DYNAINFO(31) 卖一量</p>

<p>DYNAINFO(32) 卖二量</p>

<p>DYNAINFO(33) 卖三量</p>

<p>DYNAINFO(34) 卖一价</p>

<p>DYNAINFO(35) 卖二价</p>

<p>DYNAINFO(36) 卖三价</p>

<p>DYNAINFO(37) 换手率</p>

<p>DYNAINFO(39) 市盈率</p>

<p>DYNAINFO(40) 成交方向</p>

<p>DYNAINFO(50) 采样点数</p>

<p>DYNAINFO(51) 内外比</p>

<p>DYNAINFO(52) 多空平衡</p>

<p>DYNAINFO(53) 多头获利</p>

<p>DYNAINFO(54) 空头回补</p>

<p>DYNAINFO(55) 多头止损</p>

<p>DYNAINFO(56) 空头止损</p>

<p>DYNAINFO(57) 笔升跌</p>

<p>每股公积金   finance(18)</p>

<p>未分配利润   LR:finance(31)</p>

<p>每股净资产   ZC:finance(34)</p>

<h2 id="统计函数">统计函数</h2>

<p>1．AVEDEV 平均绝对方差</p>

<p>AVEDEV(X，N) 返回平均绝对方差。</p>

<p>2．DEVSQ 数据偏差平方和</p>

<p>DEVSQ(X，N) 返回数据偏差平方和。</p>

<p>3．FORCAST 线性回归预测值</p>

<p>FORCAST(X，N) 返回线性回归预测值。</p>

<p>4．SLOPE 线性回归斜率</p>

<p>SLOPE(X，N) 返回线性回归斜率。</p>

<p>5．STD 估算标准差</p>

<p>STD(X，N) 返回估算标准差。</p>

<p>6．STDP 总体标准差</p>

<p>STDP(X，N) 返回总体标准差。</p>

<p>7．VAR 估算样本方差</p>

<p>VAR(X，N) 返回估算样本方差。</p>

<p>8．VARP 总体样本方差</p>

<p>VARP(X，N) 返回总体样本方差 。</p>

<h2 id="算术函数">算术函数</h2>

<p>1．NOT 取反</p>

<p>求逻辑非。</p>

<p>用法：NOT(X)返回非X，即当X=0时返回1，否则返回0。</p>

<p>例如：NOT(ISUP)表示平盘或收阴。</p>

<p>2．IF 逻辑判断</p>

<p>根据条件求不同的值。</p>

<p>用法：IF(X，A，B)若X不为0则返回A，否则返回B。</p>

<p>例如：IF(CLOSE&gt;OPEN，HIGH，LOW)表示该周期收阳则返回最高值，否则返回最低值。</p>

<p>3．IFF 逻辑判断</p>

<p>根据条件求不同的值。</p>

<p>用法：IFF(X，A，B)若X不为0则返回A，否则返回B。</p>

<p>例如：IFF(CLOSE&gt;OPEN，HIGH，LOW)表示该周期收阳则返回最高值，否则返回最低值。</p>

<p>4．IFN 逻辑判断</p>

<p>根据条件求不同的值。</p>

<p>用法：IFN(X，A，B)若X不为0则返回B，否则返回A。</p>

<p>例如：IFN(CLOSE&gt;OPEN，HIGH，LOW)表示该周期收阴则返回最高值，否则返回最低值。</p>

<p>5．MAX 较大值</p>

<p>求最大值。</p>

<p>用法：MAX(A,B)返回A和B中的较大值。</p>

<p>例如：MAX(CLOSE-OPEN，0)表示若收盘价大于开盘价返回它们的差值，否则返回0。</p>

<p>6．MIN 较小值</p>

<p>求最小值。</p>

<p>用法：MIN(A，B)返回A和B中的较小值。</p>

<p>例如：MIN(CLOSE，OPEN)返回开盘价和收盘价中的较小值。</p>

<h2 id="形态函数-1">形态函数</h2>

<p>1．CROSS 上穿</p>

<p>两条线交叉。</p>

<p>用法：CROSS(A，B)表示当A从下方向上穿过B时返回1，否则返回0。</p>

<p>例如：CROSS(MA(CLOSE，5)，MA(CLOSE，10))表示5日均线与10日均线交金叉。</p>

<p>2．LONGCROSS 维持一定周期后上穿</p>

<p>两条线维持一定周期后交叉。</p>

<p>用法：LONGCROSS(A，B，N)表示A在N周期内都小于B，本周期从下方向上穿过B时返回1，否则返回0。</p>

<p>3．UPNDAY 连涨</p>

<p>返回是否连涨周期数。</p>

<p>用法：UPNDAY(CLOSE,M)表示连涨M个周期。</p>

<p>4．DOWNNDAY 连跌</p>

<p>返回是否连跌周期。</p>

<p>用法：DOWNNDAY(CLOSE，M)表示连跌M个周期。</p>

<p>5．NDAY 连大</p>

<p>返回是否持续存在X&gt;Y。</p>

<p>用法：NDAY(CLOSE，OPEN，3)表示连续3日收阳线。</p>

<p>6．EXIST 存在</p>

<p>是否存在。</p>

<p>用法：EXIST(CLOSE&gt;OPEN，10)表示前10日内存在着阳线。</p>

<p>7．EVERY 一直存在</p>

<p>一直存在。</p>

<p>用法：EVERY(CLOSE&gt;OPEN，10)表示前10日内一直阳线。</p>

<p>8．LAST 持续存在</p>

<p>用法：LAST(X,A,B) A&gt;B，表示从前A日到前B日一直满足X条件。若A为0，表示从第一天开始，B为0，表示到最后日止。</p>

<p>例如：LAST(CLOSE&gt;OPEN，10，5)表示从前10日到前5日内一直阳线。</p>

<p>9．TESTSKIP(A):不满足A则直接返回.</p>

<p>用法:</p>

<p>TESTSKIP(A)</p>

<p>表示如果不满足条件A则改公式直接返回，不再计算接下来的表达式</p>

<h2 id="时间函数">时间函数</h2>

<p>1．DATE 日期取得该周期从1900以来的年月日。</p>

<p>用法： DATE例如函数返回1000101，表示2000年1月1日。</p>

<p>2．TIME 时间取得该周期的时分秒。</p>

<p>用法： TIME函数返回有效值范围为(000000-235959)。</p>

<p>3．YEAR 年份取得该周期的年份。</p>

<p>用法：YEAR</p>

<p>4．MONTH 月份取得该周期的月份。</p>

<p>用法：MONTH函数返回有效值范围为(1-12)。</p>

<p>5．WEEK 星期取得该周期的星期数。</p>

<p>用法： WEEK函数返回有效值范围为(0-6)，0表示星期天。</p>

<p>6．DAY 日期取得该周期的日期。</p>

<p>用法： DAY函数返回有效值范围为(1-31)。</p>

<p>7．HOUR 小时取得该周期的小时数。</p>

<p>用法： HOUR函数返回有效值范围为(0-23)，对于日线及更长的分析周期值为0。</p>

<p>8．MINUTE 分钟取得该周期的分钟数。</p>

<p>用法： MINUTE函数返回有效值范围为(0-59)，对于日线及更长的分析周期值为0。</p>

<p>9．FROMOPEN 分钟求当前时刻距开盘有多长时间。</p>

<p>用法：FROMOPEN返回当前时刻距开盘有多长时间，单位为分钟。</p>

<p>例如： FROMOPEN当前时刻为早上十点，则返回31。</p>

<p>10，TFILT 分钟对指定时间段的数据进行过滤,该时间段以外的数据无效.</p>

<p>用法：</p>

<p>TFILT(X,D1,M1,D2,M2)</p>

<p>例如TFILT(CLOSE,1040101,1025,1040101,1345)表示在2004年1月1日的10:25到2004年1月1日的13:45的收盘价是有效的.</p>

<p>周期以日为基本单位的,分时为0有效.</p>

<p>11．周期：PERIOD取得周期类型.</p>

<p>结果从0到11,依次分别是1/5/15/30/60分钟,日/周/月,多分钟,多日,季,年.</p>

<h2 id="行情函数">行情函数</h2>

<p>1．HIGH 最高价   返回该周期最高价。用法：HIGH</p>

<p>2．H 最高价返回该周期最高价。用法： H</p>

<p>3．LOW 最低价   返回该周期最低价。用法： LOW</p>

<p>4．L 最低价返回该周期最低价。用法： L</p>

<p>5．CLOSE 收盘价  返回该周期收盘价。用法： CLOSE</p>

<p>6．C 收盘价返回该周期收盘价。用法： C</p>

<p>7．VOL 成交量   返回该周期成交量。用法： VOL</p>

<p>8．V 成交量返回该周期成交量。用法： V</p>

<p>9．OPEN 开盘价  返回该周期开盘价。用法： OPEN</p>

<p>10．O：开盘价返回该周期开盘价。用法： O</p>

<p>11．ADVANCE 上涨家数返回该周期上涨家数。   用法： ADVANCE(本函数仅对大盘有效)</p>

<p>12．DECLINE 下跌家数返回该周期下跌家数。   用法： DECLINE(本函数仅对大盘有效)</p>

<p>13．AMOUNT 成交额返回该周期成交额。用法： AMOUNT</p>

<p>14．ASKPRICE 委卖价返回委卖1–委卖3价格   用法：ASKPRICE(N)N取1—3。(本函数仅个股在分笔成交分析周期有效)</p>

<p>15．ASKVOL 委卖量返回委卖1–委卖3量。   用法： ASKVOL(N)N取1—3。 (本函数仅个股在分笔成交分析周期有效)</p>

<p>16．BIDPRICE 委买价返回委买1–委买3价格。 用法： BIDPRICE(N)N取1—3。(本函数仅个股在分笔成交分析周期有效)</p>

<p>17．BIDVOL 委买量返回委买1–委买3量。   用法： BIDVOL(N)N取1—3。 (本函数仅个股在分笔成交分析周期有效)</p>

<p>18．BUYVOL 主动性买盘返回主动性买单量。用法：BUYVOL当本笔成交为主动性买盘时，其数值等于成交量，否则为0。(本函数仅个股在分笔成交分析周期有效)</p>

<p>19．SELLVOL 主动性卖盘返回主动性卖单量。用法：SELLVOL当本笔成交为主动性卖盘时，其数值等于成交量，否则为0。(本函数仅个股在分笔成交分析周期有效)</p>

<p>20．ISBUYORDER 主动性买单  返回该成交是否为主动性买单。</p>

<p>用法： ISBUYORDER当本笔成交为主动性买盘时，返回1，否则为0。(本函数仅个股在分笔成交分析周期有效)</p>

<p>21．ISSELLORDER 主动性卖单 返回该成交是否为主动性卖单。</p>

<p>用法： ISSELLORDER当本笔成交为主动性卖盘时，返回1，否则为0。(本函数仅个股在分笔成交分析周期有效)</p>

<p>22．成交额（元）：AMOUNT</p>

<p>23．持仓量：VOLINSTK</p>

<p>24．外盘（手）：BUYVOL</p>

<p>25．内盘（手）：SELLVOL</p>

<p>26．主动性买单：ISBUYORDER</p>

<p>27．不定周期最高价：DHIGH</p>

<p>28．不定周期开盘价：DOPEN</p>

<p>29．不定周期最低价：DLOW</p>

<p>30．不定周期收盘价：DCLOSE</p>

<p>31．不定周期成交量：DVOL</p>

</article>

    </body>
</html>
