<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    <link rel="stylesheet" href="//192.168.0.199:1313/sass/main.min.25934bb03db303dfa541f621fc29b24509d8e2c2e39a063de4a77a16ab2fec19.css">

</head>

    
<head>
    
    

    
    
    <link href="//192.168.0.199:1313/css/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>

    <h1>通达信常用公式</h1>
    <p>Fri Mar 23, 2018</p>
    
    <a class="tag tag--primary tag--small"   href="//192.168.0.199:1313/"><font color="green">Home</font></a>

    
        
           <a class="tag tag--primary tag--small" href="//192.168.0.199:1313/tags/stock">stock</a>
        
           <a class="tag tag--primary tag--small" href="//192.168.0.199:1313/tags/%E9%80%9A%E8%BE%BE%E4%BF%A1">通达信</a>
        
    

    <hr><br>
<article>
    <ul>
<li>通达信m4(MACD)公式</li>
</ul>

<p>[jtable]
参数,最小,最大,缺省
SHORT,2,200,12,
LONG,2,200,26
MID,2,200,9
ISARROW,0,1,1
[/jtable]</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">{</span>SHORT <span style="color:#ae81ff">2</span>,200,12;LONG <span style="color:#ae81ff">2</span>,200,26;MID <span style="color:#ae81ff">2</span>,200,9；ISARROW <span style="color:#ae81ff">0</span>,1,1<span style="color:#f92672">}</span>
DIFF:<span style="color:#f92672">=</span>EMA<span style="color:#f92672">(</span>CLOSE*100,SHORT<span style="color:#f92672">)</span>-EMA<span style="color:#f92672">(</span>CLOSE*100,LONG<span style="color:#f92672">)</span>;
DEA:<span style="color:#f92672">=</span>EMA<span style="color:#f92672">(</span>DIFF,MID<span style="color:#f92672">)</span>;
MACD2:<span style="color:#f92672">=(</span>DIFF - DEA<span style="color:#f92672">)</span>*2;
DIF:DIFF;
DEF:DEA;
MACD:MACD2,NODRAW;
获利比:WINNER<span style="color:#f92672">(</span>C<span style="color:#f92672">)</span>,NODRAW;
STICKLINE<span style="color:#f92672">((</span>MACD2&gt;<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span><span style="color:#f92672">)</span>,0,MACD2,0,1<span style="color:#f92672">)</span>,COLORRED;
STICKLINE<span style="color:#f92672">(((</span>MACD2&gt;<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span><span style="color:#f92672">)</span> AND <span style="color:#f92672">(</span>MACD2 &lt; REF<span style="color:#f92672">(</span>MACD2,1<span style="color:#f92672">)))</span>,0,MACD2,0,0<span style="color:#f92672">)</span>,COLORWHITE;
STICKLINE<span style="color:#f92672">((</span>MACD2&lt;<span style="color:#ae81ff">0</span><span style="color:#f92672">)</span>,0,MACD2,0,0<span style="color:#f92672">)</span>,COLORGREEN;
STICKLINE<span style="color:#f92672">(((</span>MACD2&lt;<span style="color:#ae81ff">0</span><span style="color:#f92672">)</span> AND <span style="color:#f92672">(</span>MACD2 &gt; REF<span style="color:#f92672">(</span>MACD2,1<span style="color:#f92672">)))</span>,0,MACD2,0,1<span style="color:#f92672">)</span>,COLORWHITE;
DRAWICON<span style="color:#f92672">(</span>LONGCROSS<span style="color:#f92672">(</span>CLOSE,MA<span style="color:#f92672">(</span>CLOSE,5<span style="color:#f92672">)</span>,17<span style="color:#f92672">)</span>,MACD2,1<span style="color:#f92672">)</span>;
DRAWICON<span style="color:#f92672">(</span>LONGCROSS<span style="color:#f92672">(</span>MA<span style="color:#f92672">(</span>CLOSE,5<span style="color:#f92672">)</span>,CLOSE,17<span style="color:#f92672">)</span>,MACD2,2<span style="color:#f92672">)</span>;

A1:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>MACD2&gt;0,1,-1<span style="color:#f92672">)</span>;
A2:<span style="color:#f92672">=</span>REF<span style="color:#f92672">(</span>A1,1<span style="color:#f92672">)</span>;
A3:<span style="color:#f92672">=</span>A1*A2;
A4:<span style="color:#f92672">=</span>BARSLAST<span style="color:#f92672">(</span>A3&lt;<span style="color:#ae81ff">0</span><span style="color:#f92672">)</span>;
A5:<span style="color:#f92672">=</span>A4+1;
累计面积:SUM<span style="color:#f92672">(</span>MACD2,A5<span style="color:#f92672">)</span>,NODRAW;
平均力度:SUM<span style="color:#f92672">(</span>MACD2,A5<span style="color:#f92672">)</span>/A5,NODRAW;
<span style="color:#ae81ff">0</span>,DOTLINE;

BV:<span style="color:#f92672">=</span>SUM<span style="color:#f92672">(</span>MACD2,0<span style="color:#f92672">)</span>;
BA:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>MAX<span style="color:#f92672">(</span>BV,REF<span style="color:#f92672">(</span>BV,2<span style="color:#f92672">))</span>&lt;REF<span style="color:#f92672">(</span>BV,1<span style="color:#f92672">)</span> OR MIN<span style="color:#f92672">(</span>BV,REF<span style="color:#f92672">(</span>BV,2<span style="color:#f92672">))</span>&gt;REF<span style="color:#f92672">(</span>BV,1<span style="color:#f92672">)</span>,1,0<span style="color:#f92672">)</span>;
BC:<span style="color:#f92672">=</span>BARSLAST<span style="color:#f92672">(</span>BA<span style="color:#f92672">)</span>+1;
SMACD:<span style="color:#f92672">=</span>BV-REF<span style="color:#f92672">(</span>BV,BC<span style="color:#f92672">)</span>;
VAR3:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>MACD2&gt;0,HHV<span style="color:#f92672">(</span>ABS<span style="color:#f92672">(</span>MACD2<span style="color:#f92672">)</span>,BC<span style="color:#f92672">)</span>,LLV<span style="color:#f92672">(</span>MACD2,BC<span style="color:#f92672">))</span>;
VAR4:<span style="color:#f92672">=(</span>MACD2<span style="color:#f92672">)</span>/20;<span style="color:#f92672">{</span>图形比例缩小1/20,可修改<span style="color:#f92672">}</span>

DRAWNUMBER<span style="color:#f92672">(</span>REF<span style="color:#f92672">(</span>VAR4,1<span style="color:#f92672">)</span>&gt;0 AND VAR4&lt;<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> ,REF<span style="color:#f92672">(</span>VAR3,1<span style="color:#f92672">)</span>,REF<span style="color:#f92672">(</span>累计面积,1<span style="color:#f92672">))</span>,COLORMAGENTA;
DRAWNUMBER<span style="color:#f92672">(</span>REF<span style="color:#f92672">(</span>VAR4,1<span style="color:#f92672">)</span>&lt;<span style="color:#ae81ff">0</span> AND VAR4&gt;<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> ,REF<span style="color:#f92672">(</span>VAR3,1<span style="color:#f92672">)</span>,REF<span style="color:#f92672">(</span>ABS<span style="color:#f92672">(</span>累计面积<span style="color:#f92672">)</span>,1<span style="color:#f92672">))</span>,COLORGREEN;
DRAWNUMBER<span style="color:#f92672">(</span>ISLASTBAR AND VAR4&lt;<span style="color:#ae81ff">0</span>,REF<span style="color:#f92672">(</span>VAR3,1<span style="color:#f92672">)</span>,ABS<span style="color:#f92672">(</span>累计面积<span style="color:#f92672">))</span>,COLORMAGENTA;
DRAWNUMBER<span style="color:#f92672">(</span>ISLASTBAR AND VAR4&gt;0,REF<span style="color:#f92672">(</span>VAR3,1<span style="color:#f92672">)</span>,累计面积<span style="color:#f92672">)</span>,COLORGREEN;</code></pre></div>
<ul>
<li>通达信短线利器 盘中异动预警公式</li>
</ul>

<p>{股海网提供：www.guhai.com.cn}</p>

<pre><code>* 最初
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">现价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">7</span><span style="color:#f92672">)</span>;
均价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>+<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>*0.021<span style="color:#f92672">)</span>;
条件1:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>现价&gt;均价,1,0<span style="color:#f92672">)</span>;
条件2:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">17</span><span style="color:#f92672">)</span>&gt;5,1,0<span style="color:#f92672">)</span>;
条件3:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>&lt;<span style="color:#ae81ff">0</span>.05,1,0<span style="color:#f92672">)</span>;
买入:<span style="color:#f92672">(</span>条件1<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件2<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件3<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>;</code></pre></div>
<pre><code>* 加入了限制条件减少没有操作意义的信号：
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>现价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">7</span><span style="color:#f92672">)</span>;
均价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>+<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>*0.021<span style="color:#f92672">)</span>;
条件1:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>现价&gt;均价,1,0<span style="color:#f92672">)</span>;
条件2:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">17</span><span style="color:#f92672">)</span>&gt;5,1,0<span style="color:#f92672">)</span>;
条件3:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>&lt;<span style="color:#ae81ff">0</span>.05,1,0<span style="color:#f92672">)</span>;
条件4:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>SUM<span style="color:#f92672">(</span>VOL,3<span style="color:#f92672">)</span>&lt;CAPITAL*0.25,1,0<span style="color:#f92672">)</span>;
条件5:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>SUM<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>,3<span style="color:#f92672">)</span>&lt;<span style="color:#ae81ff">0</span>.25,1,0<span style="color:#f92672">)</span>;
买入:<span style="color:#f92672">(</span>条件1<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件2<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件3<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>;<span style="color:#f92672">)</span></code></pre></div>
<pre><code>* 午盘追踪
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">现价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">7</span><span style="color:#f92672">)</span>;
均价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>+<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>*0.021<span style="color:#f92672">)</span>;
条件1:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>现价&gt;均价,1,0<span style="color:#f92672">)</span>;
条件2:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">17</span><span style="color:#f92672">)</span>&gt;2,1,0<span style="color:#f92672">)</span>;
条件3:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>&gt;0.05,1,0<span style="color:#f92672">)</span>;
买入:<span style="color:#f92672">(</span>条件1<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件2<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件3<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>;</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">｛现价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">7</span><span style="color:#f92672">)</span>;
均价:<span style="color:#f92672">=</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>+<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">11</span><span style="color:#f92672">)</span>*0.021<span style="color:#f92672">)</span>;
条件1:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>现价&gt;均价,1,0<span style="color:#f92672">)</span>;
条件2:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">17</span><span style="color:#f92672">)</span>&gt;2,1,0<span style="color:#f92672">)</span>;
条件3:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>&gt;0.05,1,0<span style="color:#f92672">)</span>;
条件4:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>SUM<span style="color:#f92672">(</span>VOL,3<span style="color:#f92672">)</span>&lt;CAPITAL*0.25,1,0<span style="color:#f92672">)</span>;
条件5:<span style="color:#f92672">=</span>IF<span style="color:#f92672">(</span>SUM<span style="color:#f92672">(</span>DYNAINFO<span style="color:#f92672">(</span><span style="color:#ae81ff">14</span><span style="color:#f92672">)</span>,3<span style="color:#f92672">)</span>&lt;<span style="color:#ae81ff">0</span>.25,1,0<span style="color:#f92672">)</span>;
买入:<span style="color:#f92672">(</span>条件1<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件2<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>AND<span style="color:#f92672">(</span>条件3<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> AND 条件4<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> AND 条件5<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span>｝</code></pre></div>
<p>实时盘中预警指标，所有的牛股都从异动开始。好好品味这两个指标会有意象不到的效果。</p>

<p>（看好些同学都在问用法，我就再详细的介绍一下。现价跟均价偏离2.1％，盘中股价突然拉升。上午量比在5％以上，下午在2％以上，阶段性放量。涨幅上午在5％以内，下午在5％以上这样跟有操作意义。前期缩量突然量比放出，其他指标已进入底部状态，可快速跟进。前期有过一段涨升，进过几天的快速缩量下跌，股价回落到重要的支撑线上，又开始放量，可以快速跟进。还有很多状况可以自己慢慢体味。）　</p>

</article>

    <script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10&v=2"></' + 'script>')</script></body>
</html>
