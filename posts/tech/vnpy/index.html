<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    <link rel="stylesheet" href="/laowalter.github.io/sass/main.min.ef740697b92983f94ae209bb0e3184554cbc28dcfc08832347dacd426dc8d3a2.css">

</head>

    
<head>
    
    

    
    
    <link href="laowalter.github.iocss/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>

    <h1>VNPY安装和使用</h1>
    <p>Thu Sep 1, 2016</p>
    
    <a class="tag tag--primary tag--small"   href="laowalter.github.io"><font color="green">Home</font></a>

    
        
           <a class="tag tag--primary tag--small" href="laowalter.github.io/tags/stock">stock</a>
        
           <a class="tag tag--primary tag--small" href="laowalter.github.io/tags/quanta">quanta</a>
        
    

    <hr><br>
<nav id="TableOfContents">
<ul>
<li><a href="#安装vnpy">安装VNPY</a>
<ul>
<li><a href="#安装python-2-and-virtualenv">安装python 2 and virtualenv</a></li>
<li><a href="#启动-退出-vnpy-环境">启动 退出 vnpy 环境</a></li>
<li><a href="#安装vnpy源程序">安装VNPY源程序</a></li>
<li><a href="#安装需要的库">安装需要的库</a></li>
<li><a href="#进入vnpy环境安装其他软件包">进入vnpy环境安装其他软件包</a></li>
<li><a href="#安装其他需要的">安装其他需要的</a></li>
</ul></li>
</ul></li>
</ul>
</nav><article>
    

<h2 id="安装vnpy">安装VNPY</h2>

<h3 id="安装python-2-and-virtualenv">安装python 2 and virtualenv</h3>

<p>(1) python2</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install python</code></pre></div>
<p>then ~/.bashrc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">PATH<span style="color:#f92672">=</span>/usr/local/bin::$PATH</code></pre></div>
<p>then 退出，在重新进入 iterm2</p>

<p>(2) virtualenv</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pip install virtualenv

<span style="color:#75715e">### 建立virtualenvs
</span><span style="color:#75715e"></span>
<span style="color:#e6db74">```</span>bash
mkdir .virtualenvs
cd .virtualenvs
virtualenv -p python vnpy
export WORKON_HOME<span style="color:#f92672">=</span>~/.virtualenvs
source ~/.virtualenvs/vnpy/bin/activate
pip install virtualenvwrapper
source ~/.virtualenvs/vnpy/bin/virtualenvwrapper.sh

<span style="color:#75715e">### 建立环境切换命令文件 start_vnpy.sh
</span><span style="color:#75715e"></span>
<span style="color:#e6db74">``</span>bash
mkdir .bin
vi .bin/start_vnpy</code></pre></div>
<p>start_vnpy</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#!/bin/sh
</span><span style="color:#75715e"></span>
export WORKON_HOME<span style="color:#f92672">=</span>~/.virtualenvs
source ~/.virtualenvs/vnpy/bin/activate
source ~/.virtualenvs/vnpy/bin/virtualenvwrapper.sh

<span style="color:#75715e">###########
</span><span style="color:#75715e">#Prompt
</span><span style="color:#75715e">#
</span><span style="color:#75715e"></span>
set_prompt <span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    Last_Command<span style="color:#f92672">=</span>$? <span style="color:#75715e"># Must come first!
</span><span style="color:#75715e"></span>    Blue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\[\e[01;34m\]&#39;</span>
    White<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\[\e[01;37m\]&#39;</span>
    Red<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\[\e[01;31m\]&#39;</span>
    Green<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\[\e[01;32m\]&#39;</span>
    Reset<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\[\e[00m\]&#39;</span>
    FancyX<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\342\234\227&#39;</span>
    Checkmark<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\342\234\223&#39;</span>

    <span style="color:#75715e"># Add a bright white exit status for the last command
</span><span style="color:#75715e"></span>    PS1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$White<span style="color:#e6db74">\$? &#34;</span>
    <span style="color:#75715e"># If it was successful, print a green check mark. Otherwise, print
</span><span style="color:#75715e"></span>    <span style="color:#75715e"># a red X.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $Last_Command <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
        PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;</span>$Green$Checkmark<span style="color:#e6db74"> &#34;</span>
    <span style="color:#66d9ef">else</span>
        PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;</span>$Red$FancyX<span style="color:#e6db74"> &#34;</span>
    <span style="color:#66d9ef">fi</span>
    
    <span style="color:#75715e"># SET ENVIROMENT DISPLAY NAME HERE
</span><span style="color:#75715e"></span>    PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;[\[\e[31m\]vnpy\[\e[m\]]&#34;</span>

    <span style="color:#75715e"># If root, just print the host in red. Otherwise, print the current user
</span><span style="color:#75715e"></span>    <span style="color:#75715e"># and host in green.
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> $EUID <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
        PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;</span>$Red<span style="color:#e6db74">\\h &#34;</span>
    <span style="color:#66d9ef">else</span>
        PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;</span>$Green<span style="color:#e6db74">\\u@\\h &#34;</span>
    <span style="color:#66d9ef">fi</span>
    <span style="color:#75715e"># Print the working directory and prompt marker in blue, and reset
</span><span style="color:#75715e"></span>    <span style="color:#75715e"># the text color to the default.
</span><span style="color:#75715e"></span>    PS1<span style="color:#f92672">+=</span><span style="color:#e6db74">&#34;</span>$Blue<span style="color:#e6db74">\\w \\\$</span>$Reset<span style="color:#e6db74"> &#34;</span>
<span style="color:#f92672">}</span>

PROMPT_COMMAND<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;RET=$?; if [ $RET != 0  ] ; then echo &#34;rc: $RET&#34;; fi&#39;</span>

PROMPT_COMMAND<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;set_prompt&#39;</span></code></pre></div>
<h3 id="启动-退出-vnpy-环境">启动 退出 vnpy 环境</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">source .bin/start_vnpy.sh
exit</code></pre></div>
<h3 id="安装vnpy源程序">安装VNPY源程序</h3>

<h3 id="安装需要的库">安装需要的库</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install pyqt
brew install sip</code></pre></div>
<p>因为建立vnpy时， sip和pyqt的数据包没有被copy过去，所以需要自己链接</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd ~/.virtualenvs/vnpy/lib/python2.7
ln -s /usr/local/lib/python2.7/site-packages/PyQt4 .
ln -s /usr/local/lib/python2.7/site-packages/sip* .</code></pre></div>
<h3 id="进入vnpy环境安装其他软件包">进入vnpy环境安装其他软件包</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">source ~/.bin/vnpy
pip install pymongo qdarkstyle psutil</code></pre></div>
<h3 id="安装其他需要的">安装其他需要的</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install boost boost-python
brew install cmake</code></pre></div>
</article>

    </body>
</html>
