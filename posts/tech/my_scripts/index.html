<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    <link rel="stylesheet" href="/laowalter.github.io/sass/main.min.25934bb03db303dfa541f621fc29b24509d8e2c2e39a063de4a77a16ab2fec19.css">

</head>

    
<head>
    
    

    
    
    <link href="laowalter.github.iocss/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>

    <h1>My_Scripts</h1>
    <p>Tue Nov 21, 2017</p>
    
    <a class="tag tag--primary tag--small"   href="laowalter.github.io"><font color="green">Home</font></a>

    
        
           <a class="tag tag--primary tag--small" href="laowalter.github.io/tags/shell">shell</a>
        
    

    <hr><br>
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#rysnc-cif-to-local">rysnc cif to local</a></li>
<li><a href="#生成板块分析图-for-crontab">生成板块分析图 for crontab</a></li>
</ul></li>
</ul></li>
</ul>
</nav><article>
    

<h3 id="rysnc-cif-to-local">rysnc cif to local</h3>

<p>~/.bin/rysnc_cifs.sh</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
sudo umount -f /mnt/cifs/* <span style="color:#f92672">||</span>true

sudo mount /mnt/cifs/vipdoc 
<span style="color:#66d9ef">if</span> test $? -eq <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">then</span>   <span style="color:#75715e">#sucessfull mount</span>
    echo <span style="color:#e6db74">&#34;mounted /mnt/cifs/vipdoc&#34;</span>
    echo <span style="color:#e6db74">&#34;rsync /mnt/cifs/vipdoc to /backup/tdx&#34;</span>
    rsync -az /mnt/cifs/vipdoc /backup/tdx
    echo <span style="color:#e6db74">&#34;umount vipdoc&#34;</span>
    sudo umount /mnt/cifs/vipdoc
<span style="color:#66d9ef">fi</span>

sudo mount /mnt/cifs/hq_cache 
<span style="color:#66d9ef">if</span> test $? -eq <span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">then</span>   <span style="color:#75715e"># sucessfull mount</span>
    echo <span style="color:#e6db74">&#34;mounted /mnt/cifs/hq_cache&#34;</span>
    echo <span style="color:#e6db74">&#34;rysnc /mnt/cifs/hq_cache  to /backup/tdx&#34;</span>
    rsync -az /mnt/cifs/hq_cache /backup/tdx 
    echo <span style="color:#e6db74">&#34;umount hq_cache&#34;</span>
    sudo umount /mnt/cifs/hq_cache
<span style="color:#66d9ef">fi</span></code></pre></div>
<h3 id="生成板块分析图-for-crontab">生成板块分析图 for crontab</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
. ~/.bin/python3.sh
cd ~/chan/k/output
DATE<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>date +%Y-%m-%d<span style="color:#e6db74">`</span><span style="color:#e6db74">&#39;*&#39;</span>
find . -type f ! -name <span style="color:#e6db74">${</span>DATE<span style="color:#e6db74">}</span> -delete
cd ~/chan/k
./compare_stocks.py -f selected
./compare_stocks.py -f index_focused
./compare_stocks.py -f all_index</code></pre></div>
</article>

    </body>
</html>
