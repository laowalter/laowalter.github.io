<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    
    <link rel="stylesheet" href="/sass/main.min.07425c1d13e589b079e57d7ab2012293a666c01db6d55603a710971b12d5d67f.css">

</head>

    
<head>
    
    

    
    
    
    <link href="/css/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>
       <div class="homepage-header">
          <div class="homepage-left">
            <h1>DataBases</h1> 
            <p class="datetime">Mon, Feb 29, 2016</p>
            <a class="tag tag--primary tag--small"   href="/"><font color="green">Home</font></a>

            
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/mysql">mysql</a>
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/perl">perl</a>
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/apache">apache</a>
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/mongodb">mongodb</a>
                
            
          </div>
      </div>

    <hr><br><nav id="TableOfContents">
<ul>
<li><a href="#mongodb">Mongodb</a>
<ul>
<li><a href="#enter-mongo-shell">Enter mongo shell</a></li>
<li><a href="#start-mongodb">Start mongodb</a></li>
<li><a href="#mongodb-operation">Mongodb operation</a></li>
</ul></li>
<li><a href="#mysql">Mysql</a>
<ul>
<li><a href="#operation">Operation</a></li>
<li><a href="#mysql-php-apahe-perl-dbd-in-yosemite">Mysql Php Apahe Perl DBD in Yosemite</a></li>
<li><a href="#permit-remote-accee-to-root">permit remote accee to root</a></li>
</ul></li>
</ul></li>
</ul>
</nav><article>
    

<h2 id="mongodb">Mongodb</h2>

<h3 id="enter-mongo-shell">Enter mongo shell</h3>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mongo <span style="color:#0086f7;font-weight:bold">192</span>.168.0.25</code></pre></div>
<h3 id="start-mongodb">Start mongodb</h3>

<ul>
<li><p>Upgrade</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew upgrade mongodb
brew info mongdb
ln -s /usr/local/Cellar/mongodb/3.2.4/bin/* /usr/local/bin/</code></pre></div></li>

<li><p>config: /usr/local/etc/mongod.conf, Dont forget touh <code>/usr/local/var/log/mongodb/mongo.log</code></p></li>
</ul>

<div class="file" >
    
    <div class="filename" >
        <p style="padding:0; margin:0;">filename: <b> /usr/local/etc/mongod.conf</b></p>
        <div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-vim" data-lang="vim">   systemLog:
        destination: file
        path: <span style="color:#0086d2">/usr/</span>local<span style="color:#0086d2">/var/</span>log<span style="color:#0086d2">/mongodb/</span>mongo.log
        logAppend: true
    storage:
        dbPath: <span style="color:#0086d2">/Volumes/</span>Home<span style="color:#0086d2">/Walter/</span>mongodb
    net:
        bindIp: <span style="color:#0086f7;font-weight:bold">192</span>.<span style="color:#0086f7;font-weight:bold">168</span>.<span style="color:#0086f7;font-weight:bold">0</span>.<span style="color:#0086f7;font-weight:bold">99</span></code></pre></div>
    </div>
</div>

<ul>
<li><p>manual start</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mongod --config /usr/local/etc/mongod.conf</code></pre></div></li>

<li><p>Mac autostart</p>

<ul>
<li><code>/Library/LaunchDaemons/org.mongo.mongod.plist</code></li>
</ul></li>
</ul>

<div class="file" >
    
    <div class="filename" >
        <p style="padding:0; margin:0;">filename: <b>/Library/LaunchDaemons/org.mongo.mongod.plist</b></p>
        <div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">       <span style="color:#ff0007;background-color:#0f140f;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>  
        <span style="color:#ff0007;background-color:#0f140f;font-weight:bold;font-style:italic">&lt;!DOCTYPE plist PUBLIC &#34;-//Apple//DTD PLIST 1.0//EN&#34; &#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;&gt;</span>  
        <span style="color:#fb660a;font-weight:bold">&lt;plist</span> <span style="color:#ff0086;font-weight:bold">version=</span><span style="color:#0086d2">&#34;1.0&#34;</span><span style="color:#fb660a;font-weight:bold">&gt;</span>  
        <span style="color:#fb660a;font-weight:bold">&lt;dict&gt;</span>  
        <span style="color:#fb660a;font-weight:bold">&lt;key&gt;</span>Label<span style="color:#fb660a;font-weight:bold">&lt;/key&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;string&gt;</span>org.mongo.mongod<span style="color:#fb660a;font-weight:bold">&lt;/string&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;key&gt;</span>RunAtLoad<span style="color:#fb660a;font-weight:bold">&lt;/key&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;true/&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;key&gt;</span>ProgramArguments<span style="color:#fb660a;font-weight:bold">&lt;/key&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;array&gt;</span>
            <span style="color:#fb660a;font-weight:bold">&lt;string&gt;</span>/usr/local/bin/mongod<span style="color:#fb660a;font-weight:bold">&lt;/string&gt;</span>
            <span style="color:#fb660a;font-weight:bold">&lt;string&gt;</span>--config<span style="color:#fb660a;font-weight:bold">&lt;/string&gt;</span>
            <span style="color:#fb660a;font-weight:bold">&lt;string&gt;</span>/usr/local/etc/mongod.conf<span style="color:#fb660a;font-weight:bold">&lt;/string&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;/array&gt;</span>
        <span style="color:#fb660a;font-weight:bold">&lt;/dict&gt;</span>  
        <span style="color:#fb660a;font-weight:bold">&lt;/plist&gt;</span></code></pre></div>
    </div>
</div>

<pre><code>* Add to launchctl
</code></pre>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">		sudo chown root:wheel /Library/LaunchDaemons/org.mongo.mongod.plist  
		sudo launchctl load /Library/LaunchDaemons/org.mongo.mongod.plist  
		sudo launchctl start org.mongo.mongod</code></pre></div>
<h3 id="mongodb-operation">Mongodb operation</h3>

<ul>
<li><p>connect database</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	$ mongod
	$ use stock</code></pre></div></li>

<li><p>create compound unique index</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mongodb" data-lang="mongodb">	db.hist.createIndex({&#39;code&#39;:1, &#39;date&#39;:-1},{background:true, unique:true})</code></pre></div></li>

<li><p>multi select</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mongodb" data-lang="mongodb">	db.getCollection(&#39;histfq&#39;).find({&#39;code&#39;:&#39;600036&#39;, date:ISODate(&#34;2013-02-06T00:00:00.000Z&#34;)})</code></pre></div></li>

<li><p>sort</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mongodb" data-lang="mongodb">	db.getCollection(&#39;histfq&#39;).find({&#39;code&#39;:&#39;600036&#39;}).sort({&#39;date&#39;:-1})</code></pre></div></li>

<li><p>date</p>

<ul>
<li><p>correct format in python for mongodb</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">		date_format {<span style="color:#0086d2">&#39;date&#39;</span>: datetime.datetime(<span style="color:#0086f7;font-weight:bold">2009</span>, <span style="color:#0086f7;font-weight:bold">11</span>, <span style="color:#0086f7;font-weight:bold">10</span>, <span style="color:#0086f7;font-weight:bold">10</span>, <span style="color:#0086f7;font-weight:bold">45</span>)}</code></pre></div></li>
</ul></li>
</ul>

<h2 id="mysql">Mysql</h2>

<h3 id="operation">Operation</h3>

<ul>
<li><p>UPDATE test SET</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">	url= <span style="color:#fb660a;font-weight:bold">REPLACE</span>(<span style="color:#0086d2">&#39;www.test.com&#39;</span>,<span style="color:#0086d2">&#39;test&#39;</span>, <span style="color:#0086d2">&#39;abc&#39;</span> )
	<span style="color:#fb660a;font-weight:bold">WHERE</span> url <span style="color:#fb660a;font-weight:bold">REGEXP</span> <span style="color:#0086d2">&#39;^(www.test)&#39;</span>;</code></pre></div></li>
</ul>

<h3 id="mysql-php-apahe-perl-dbd-in-yosemite">Mysql Php Apahe Perl DBD in Yosemite</h3>

<ul>
<li><p>Following this:</p>

<p><a href="http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite/">http://coolestguidesontheplanet.com/get-apache-mysql-php-phpmyadmin-working-osx-10-10-yosemite</a></p></li>

<li><p>and this:</p>

<p><a href="https://movabletype.org/documentation/installation/osx-10-9.htmlâ€‹">https://movabletype.org/documentation/installation/osx-10-9.htmlâ€‹</a></p></li>

<li><p>Then add:</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-apache" data-lang="apache">	&#34;Require <span style="color:#fb660a;font-weight:bold">all</span> granted&#34; to username.conf</code></pre></div></li>

<li><p>Before cpan install DBD::mysql for perl</p>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib</code></pre></div></li>
</ul>

<h3 id="permit-remote-accee-to-root">permit remote accee to root</h3>
<div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">mysql&gt; <span style="color:#fb660a;font-weight:bold">GRANT</span> <span style="color:#fb660a;font-weight:bold">ALL</span> PRIVILEGES <span style="color:#fb660a;font-weight:bold">ON</span> *.* <span style="color:#fb660a;font-weight:bold">TO</span> <span style="color:#0086d2">&#39;root&#39;</span>@<span style="color:#0086d2">&#39;%&#39;</span> IDENTIFIED <span style="color:#fb660a;font-weight:bold">BY</span> <span style="color:#0086d2">&#39;t0ngfang&#39;</span> <span style="color:#fb660a;font-weight:bold">WITH</span> <span style="color:#fb660a;font-weight:bold">GRANT</span> <span style="color:#fb660a;font-weight:bold">OPTION</span>;
mysql&gt; <span style="color:#fb660a;font-weight:bold">FLUSH</span> PRIVILEGES;</code></pre></div>
</article>

    <hr><br>
<p class="center">ONLY FOR MY PERSONAL USE. <br> ALL RIGHTS RESERVED. </p>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

    </body>
</html>
