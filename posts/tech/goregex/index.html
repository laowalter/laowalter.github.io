<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;  user-scalable=0;" >

    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    
    <link rel="stylesheet" href="/sass/main.min.91fe23d298c61475f6a6ebc821ec21692e755f60b6ae426b7b3462333eefce36.css">

</head>

    
<head>
    
    

    
    
    
    <link href="/css/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body width="device-width">
       <div class="homepage-header">
          <div class="homepage-left">
            <h1>Go Regex</h1> 
            <p class="datetime">Fri, Jun 28, 2019</p>
            <a class="tag tag--primary tag--small"   href="/"><font color="green">Home</font></a>

            
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/go">go</a>
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/regex">regex</a>
                
            
          </div>
      </div>

    <hr><br><nav id="TableOfContents">
<ul>
<li><a href="#golang中的正则表达式-链接-https-blog-csdn-net-zfy1355-article-details-52959803"><a href="https://blog.csdn.net/zfy1355/article/details/52959803">Golang中的正则表达式(链接)</a></a></li>
<li><a href="#如下代码使用golang的正则表达式regexp-去除html-css-script代码-仅保留页面文字">如下代码使用golang的正则表达式regexp：去除HTML，CSS，SCRIPT代码，仅保留页面文字</a></li>
</ul></li>
</ul>
</nav><article>
    

<h2 id="golang中的正则表达式-链接-https-blog-csdn-net-zfy1355-article-details-52959803"><a href="https://blog.csdn.net/zfy1355/article/details/52959803">Golang中的正则表达式(链接)</a></h2>

<h2 id="如下代码使用golang的正则表达式regexp-去除html-css-script代码-仅保留页面文字">如下代码使用golang的正则表达式regexp：去除HTML，CSS，SCRIPT代码，仅保留页面文字</h2>

<div class="highlight"><div style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#fb660a;font-weight:bold">package</span> main

<span style="color:#fb660a;font-weight:bold">import</span> (
    <span style="color:#0086d2">&#34;fmt&#34;</span>
    <span style="color:#0086d2">&#34;io/ioutil&#34;</span>
    <span style="color:#0086d2">&#34;net/http&#34;</span>
    <span style="color:#0086d2">&#34;regexp&#34;</span>
    <span style="color:#0086d2">&#34;strings&#34;</span>
)

<span style="color:#fb660a;font-weight:bold">func</span> <span style="color:#ff0086;font-weight:bold">main</span>() {
    resp, err := http.<span style="color:#ff0086;font-weight:bold">Get</span>(<span style="color:#0086d2">&#34;http://www.baidu.com&#34;</span>)
    <span style="color:#080;background-color:#0f140f;font-style:italic">// resp, err := http.Get(&#34;http://www.163.com&#34;)
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    <span style="color:#fb660a;font-weight:bold">if</span> err != <span style="color:#fb660a;font-weight:bold">nil</span> {
        fmt.<span style="color:#ff0086;font-weight:bold">Println</span>(<span style="color:#0086d2">&#34;http get error.&#34;</span>)
    }
    <span style="color:#fb660a;font-weight:bold">defer</span> resp.Body.<span style="color:#ff0086;font-weight:bold">Close</span>()
    body, err := ioutil.<span style="color:#ff0086;font-weight:bold">ReadAll</span>(resp.Body)
    <span style="color:#fb660a;font-weight:bold">if</span> err != <span style="color:#fb660a;font-weight:bold">nil</span> {
        fmt.<span style="color:#ff0086;font-weight:bold">Println</span>(<span style="color:#0086d2">&#34;http read error&#34;</span>)
    }

    src := string(body)

    <span style="color:#080;background-color:#0f140f;font-style:italic">//将HTML标签全转换成小写
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    re, _ := regexp.<span style="color:#ff0086;font-weight:bold">Compile</span>(<span style="color:#0086d2">&#34;\\&lt;[\\S\\s]+?\\&gt;&#34;</span>)
    src = re.<span style="color:#ff0086;font-weight:bold">ReplaceAllStringFunc</span>(src, strings.ToLower)

    <span style="color:#080;background-color:#0f140f;font-style:italic">//去除STYLE
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    re, _ = regexp.<span style="color:#ff0086;font-weight:bold">Compile</span>(<span style="color:#0086d2">&#34;\\&lt;style[\\S\\s]+?\\&lt;/style\\&gt;&#34;</span>)
    src = re.<span style="color:#ff0086;font-weight:bold">ReplaceAllString</span>(src, <span style="color:#0086d2">&#34;&#34;</span>)

    <span style="color:#080;background-color:#0f140f;font-style:italic">//去除SCRIPT
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    re, _ = regexp.<span style="color:#ff0086;font-weight:bold">Compile</span>(<span style="color:#0086d2">&#34;\\&lt;script[\\S\\s]+?\\&lt;/script\\&gt;&#34;</span>)
    src = re.<span style="color:#ff0086;font-weight:bold">ReplaceAllString</span>(src, <span style="color:#0086d2">&#34;&#34;</span>)

    <span style="color:#080;background-color:#0f140f;font-style:italic">//去除所有尖括号内的HTML代码，并换成换行符
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    re, _ = regexp.<span style="color:#ff0086;font-weight:bold">Compile</span>(<span style="color:#0086d2">&#34;\\&lt;[\\S\\s]+?\\&gt;&#34;</span>)
    src = re.<span style="color:#ff0086;font-weight:bold">ReplaceAllString</span>(src, <span style="color:#0086d2">&#34;\n&#34;</span>)

    <span style="color:#080;background-color:#0f140f;font-style:italic">//去除连续的换行符
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>    re, _ = regexp.<span style="color:#ff0086;font-weight:bold">Compile</span>(<span style="color:#0086d2">&#34;\\s{2,}&#34;</span>)
    src = re.<span style="color:#ff0086;font-weight:bold">ReplaceAllString</span>(src, <span style="color:#0086d2">&#34;\n&#34;</span>)

    fmt.<span style="color:#ff0086;font-weight:bold">Println</span>(strings.<span style="color:#ff0086;font-weight:bold">TrimSpace</span>(src))
}</code></pre></td></tr></table>
</div>
</div>

</article>

    <hr><br>
<p class="center">ONLY FOR MY PERSONAL USE. <br> ALL RIGHTS RESERVED. </p>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

    </body>
</html>
