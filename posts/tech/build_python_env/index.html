<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">

    
    
    <link rel="stylesheet" href="/sass/main.min.6e3c2b079ee31b17abb26d025a098c60ce82093b938c09a95277f558ea824d75.css">

</head>

    
<head>
    
    

    
    
    
    <link href="/css/section_number/section_number.css" rel="stylesheet" type="text/css">
    
</head>

    <body>
       <div class="homepage-header">
          <div class="homepage-left">
            <h1>Build python ENV</h1> 
            <p>Tue Sep 27, 2016</p>
            <a class="tag tag--primary tag--small"   href="/"><font color="green">Home</font></a>

            
                
                    
                    <a class="tag tag--primary tag--small" href="/tags/python">python</a>
                
            
          </div>
      </div>

    <hr><br><nav id="TableOfContents">
<ul>
<li><a href="#install-pypy">Install pypy</a>
<ul>
<li><a href="#download-tar-package-from-http-pypy-org">Download tar package from <a href="http://pypy.org/">http://pypy.org/</a></a></li>
<li><a href="#extract-pakage-to-opt">Extract pakage to /opt</a></li>
<li><a href="#create-virtualenv-manually">Create virtualenv manually</a></li>
<li><a href="#install-pip">Install pip</a></li>
<li><a href="#manually-build-activate-shell-scripts">Manually build activate shell scripts</a></li>
<li><a href="#according-the-following-reference-to-create-a-bin-pypy-sh">According the following reference to create a ~/.bin/pypy.sh</a></li>
</ul></li>
<li><a href="#install-python-and-virtualenv">Install Python and Virtualenv</a>
<ul>
<li><a href="#create-a-virtual-for-development">Create a virtual for development</a></li>
</ul></li>
<li><a href="#build-for-proj-qsfrex-and-qstrader">Build for Proj: qsfrex and qstrader</a>
<ul>
<li><a href="#install-spyder-ide">Install Spyder IDE</a></li>
<li><a href="#matplotlib">Matplotlib</a></li>
</ul></li>
<li><a href="#ta-lib">TA-Lib</a></li>
<li><a href="#install-other-libs">Install other libs</a></li>
<li><a href="#vim-python-mode">vim  python-mode</a>
<ul>
<li><a href="#install">install</a></li>
<li><a href="#run">run</a></li>
<li><a href="#debug">debug</a></li>
</ul></li>
</ul></li>
</ul>
</nav><article>
    

<h2 id="install-pypy">Install pypy</h2>

<p><code>Notice</code>：This situation is install pypy3 after another virtualenv for python3 has already installed.</p>

<h3 id="download-tar-package-from-http-pypy-org">Download tar package from <a href="http://pypy.org/">http://pypy.org/</a></h3>

<h3 id="extract-pakage-to-opt">Extract pakage to /opt</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">tar xvf pypy3.3-v5.2.0-alpha1-osx64.tar.bz2 /opt/</code></pre></div>
<h3 id="create-virtualenv-manually">Create virtualenv manually</h3>

<p><code>Notice</code>: For some reason, can not simplely run &lsquo;virtualenv&rsquo; -p to create one.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">source .bin/quanta.sh <span style="color:#75715e"># enter a python3 virtualenv already exist, this named &#39;quanta&#39;</span>
cd .virtualenv
virtualenv -p /opt/pypy3.3-v5.2.0-alpha1-osx64/bin/pypy3 pypy3
<span style="color:#75715e"># will got some ERRORS, and FORGET IT.</span> </code></pre></div>
<h3 id="install-pip">Install pip</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd .virtualenv/pypy3
./pypy3 -m ensurepip
ln -s pip3 pip
./pip install virtualenvwrapper</code></pre></div>
<h3 id="manually-build-activate-shell-scripts">Manually build activate shell scripts</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd ~/.virtualenv/pypy3/bin/
cp ~/.virtualenv/quanta/bin/activate* .  <span style="color:#75715e"># copy all the activate scripts of quanta env</span></code></pre></div>
<p>Edit  ~/.virtualenv/pypy3/bin/activate, activate.csh activate.fish and activate_this.py, replace &lsquo;quanta&rsquo; by &lsquo;pypy3&rsquo;</p>

<h3 id="according-the-following-reference-to-create-a-bin-pypy-sh">According the following reference to create a ~/.bin/pypy.sh</h3>

<h2 id="install-python-and-virtualenv">Install Python and Virtualenv</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install python
brew install python3
pip install virtualenv <span style="color:#f92672">(</span>pip3 install virtualenv<span style="color:#f92672">)</span>
pip install virtualenvwrapper</code></pre></div>
<p>or want to install gui tkinter with python3</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew uninstall python3
brew install homebrew/dupes/tcl-tk
brew install python3 --with-tcl-tk --framework</code></pre></div>
<h3 id="create-a-virtual-for-development">Create a virtual for development</h3>

<p>1 create</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	$ mkdir .virtualenvs
	$ cd .virtualenvs
	$ virtualenv -p python3 quanta <span style="color:#f92672">(</span> or no site-package copyied virtualenv  --no-site-package -p python3 quanta<span style="color:#f92672">)</span>
	export WORKON_HOME<span style="color:#f92672">=</span>~/.virtualenvs
	source ~/.virtualenvs/quanta/bin/activate</code></pre></div>
<p>2 modify .bashrc add the followings</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	export WORKON_HOME<span style="color:#f92672">=</span>~/.virtualenvs
	source ~/.virtualenvs/quanta/bin/activate</code></pre></div>
<p>3 re-login, through the above <code>.bashrc</code></p>

<p>(1) install virtualenvwrapper</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	pip install virtualenvwrapper</code></pre></div>
<p>(2)  edit ~/.bashrc add the following line</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	source ~/.virtualenvs/quanta/bin/virtualenvwrapper.sh</code></pre></div>
<p>(3) export env</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	export WORKON_HOME<span style="color:#f92672">=</span>~/.virtualenvs
	source ~/.virtualenvs/quanta/bin/activate
	source ~/.virtualenvs/quanta/bin/virtualenvwrapper.sh</code></pre></div>
<p>4 add path to virtualenv</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	add2virtualenv directory1 directory2</code></pre></div>
<h2 id="build-for-proj-qsfrex-and-qstrader">Build for Proj: qsfrex and qstrader</h2>

<p>1 make directory <code>Qsfrex</code> and <code>Qstrader</code>  under <code>~/quanta</code></p>

<div class="file" >
    
    <div class="filename" >
        <p style="padding:0; margin:0;">filename: <b>Edit requirements.txt</b></p>
        <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">   ipython
    matplotlib
    mock
    nose
    numpy
    pandas
    pyparsing
    python<span style="color:#f92672">-</span>dateutil
    pytz
    requests
    scikit<span style="color:#f92672">-</span>learn
    scipy
    seaborn
    six
    urllib3</code></pre></div>
    </div>
</div>

<p>2 Activate quanta env</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	source ~/.virtualenvs/quanta/bin/activate
	pip3 install -r requirements.txt</code></pre></div>
<p>3 Add searching path for all the directory under ~/quanta, because qsfrex, qstrader and other my development is under it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	add2virtualenv ~/quanta</code></pre></div>
<h3 id="install-spyder-ide">Install Spyder IDE</h3>

<p>1 Install PyQt5 under virtualenv</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	brew install PyQt5 --with-python3
	brew install PyQt4 --with-python3
	brew install sip --with-python3
	pip install sphnix
	ln -s /usr/local/Cellar/pyqt5/5.5.1/lib/python3.5/site-packages/PyQt5 ~/.virtualenvs/quanta/lib/python3.5/site-packages/
	ln -s /usr/local/Cellar/pyqt/4.11.4/lib/python3.5/site-packages/PyQt4 ~/.virtualenvs/quanta/lib/python3.5/site-packages/
	ln -s /usr/local/Cellar/sip/4.17/lib/python3.5/site-packages/* ~/.virtualenvs/quanta/lib/python3.5/site-packages/</code></pre></div>
<p>2 Download and Run spyder</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	git clone https://github.com/spyder-ide/spyder
	python bootstrap.py</code></pre></div>
<p>3 max-line-length in pep8 setting for spyder</p>

<pre><code>`~/.config/pep8`
</code></pre>

<pre><code>    [pep8]
    max-line-length = 120
</code></pre>

<h3 id="matplotlib">Matplotlib</h3>

<p>1 Install</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	brew install pygtk</code></pre></div>
<p>Since already install PyQt5, so edit <code>./matplotlib/matplotlibrc</code></p>

<pre><code>Fro UTF8 fonts
backend: Qt5Agg
font.sans-serif : STHeiti
axes.unicode_minus  : False
</code></pre>

<h2 id="ta-lib">TA-Lib</h2>

<ul>
<li><p>Install</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	$ brew install ta-lib
	$ pip install TA-Lib</code></pre></div></li>

<li><p><a href="http://mrjbq7.github.io/ta-lib/doc_index.html">Documents: http://mrjbq7.github.io/ta-lib/doc_index.html</a></p></li>
</ul>

<h2 id="install-other-libs">Install other libs</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">	$ pip install statsmodels</code></pre></div>
<h2 id="vim-python-mode">vim  python-mode</h2>

<h3 id="install">install</h3>

<ul>
<li>vim，macvim need reinstall under the current active virtualenv</li>

<li><p>macvim can only support either one of python2 and python3</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install macvim --with-python3
brew install vim --with-python3</code></pre></div></li>
</ul>

<h3 id="run">run</h3>

<ul>
<li>run <code>:\r</code></li>
</ul>

<h3 id="debug">debug</h3>

<p>[<a href="http://stackoverflow.com/questions/15687170/start-python-pdb-with-multiple-arguments">http://stackoverflow.com/questions/15687170/start-python-pdb-with-multiple-arguments</a>]</p>

</article>

    </body>
</html>
